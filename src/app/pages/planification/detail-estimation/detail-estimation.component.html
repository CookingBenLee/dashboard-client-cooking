
<div style="text-align: center;"> <h1>Programme des plats du {{ config.data.startDate }} au {{ config.data.endDate }}</h1> </div>

<div style="display: flex; justify-content: space-between; align-items: center; margin: 5px;">
    <div>
    </div>
    <div>
        <p-button (onClick)="showDialog()" label="Générer feuille de course" icon="pi pi-eye" />
    </div>
</div>
<!-- Première Table : Preparation -->
 <div class="listdiv"  *ngFor="let plat of data,let k=index">
    <table>
        <thead>
            <tr>
                <th colspan="12" style="text-align: left;"><b>{{plat.name}} : {{ getQuantite(plat.id) }} Planifié(s)</b></th>
            </tr>
        <tbody>
          <tr >
                <th colspan="12" style="text-align: center;"><i>LISTE DES RECETTES</i></th>
                <td>Qté initiale</td>
                <td>Stock avant</td>
                <td>Qté planifié</td>
                <td class="highlight">Stock après</td>
            </tr>
            <tr *ngFor="let rec of plat.recipes ">
                  <th colspan="12" style="text-align: left;">{{ rec.recipe.name }}</th>
                  <td>{{ rec.quantity/1000 }}  KG</td>
                  <td>{{ rec.recipe.stock }} KG</td>
                  <td>{{ rec.quantity * getQuantite(plat.id) }} KG</td>
                  <td class="highlight">{{ rec.recipe.stock - rec.quantity * getQuantite(plat.id) }} KG</td>
                  <!--<td class="highlight">{{ rec.quantity - getQuantite(plat.id) }} KG</td>-->
              </tr>
            
            <tr  *ngFor="let composition of plat.compositionList" >
                <td>{{composition?.recipe?.name}}</td>
                <td>{{composition?.quantityKg  |  number : '.1-5'}}</td>
                <td>{{composition?.recipe?.stock  |  number : '.1-5'}}</td>
                <td>{{composition?.recipe?.qteEstimee  |  number : '.1-5'}}</td>
                <td class="highlight">{{composition?.recipe?.stockApres  |  number : '.1-5'}}</td>
            </tr>
            
        </tbody>
    </table>
    
    <!-- Barre jaune de séparation -->
    <div class="separator1"></div>
    
    <!-- Deuxième Table : Liste des Ingrédients -->
    <table>
        <thead>
            <tr>
                <th><i>DETAILS DES RECETTES</i></th>
                <th>INGREDIENT</th>
                <th>STOCK AV KG</th>
                <th>QTE PLANIFIEE KG</th>
                <th>STOCK APRES KG</th>
                <th>OBSERVATION</th>
            </tr>
        </thead>
        <tbody *ngFor="let composition of  data2[k]?.compositionList">
            <tr *ngFor="let detail of composition.recipe.detailList, let j=index">
                <td *ngIf="j==0" [rowSpan]="composition.recipe.detailList">{{composition?.recipe?.name}}</td>
                <td>{{detail?.ingredient?.name}}</td>
                <td></td>
                <td></td>
                <td></td>
                 <td></td>
                 <!--<td>{{detail?.ingredient?.stock?.quantity  |  number : '.1-3'}}</td>
                <td>{{detail?.brut  |  number : '.1-3'}}</td>
                <td>{{detail?.stockApres  |  number : '.1-3'}}</td>
                <td [ngClass]="{'insufficient': detail.stockApres<0}" ><span *ngIf="detail.stockApres<0" >Insuffisant</span></td>-->
            </tr>
        </tbody>
    
    </table>
    <div class="separator"></div>

 </div>



 <!--<div class="card flex justify-content-center" >
    <p-dialog 
        header="Détail de la feuille de course" 
        [modal]="true" 
        [(visible)]="visible" 
        [style]="{ width: '100vw', height: '100vh' }" 
        [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" 
        [maximizable]="true">

        <app-feuille-course [detailRecipeList]="listFeuille"></app-feuille-course>
        
    </p-dialog>
</div>-->
