<div class="login-container">
  <div class="login-form-section">
    <div class="form-container">
      <h2>Modifier le Compte</h2>

      <form *ngIf="compteUser" id="updateAccount" #fUpdate="ngForm" (ngSubmit)="updateUserAccount(fUpdate)">
        <div class="form-horizontal">

          <!-- Section Gauche -->
          <div class="form-left">
            <fieldset class="nested">
              <legend>Informations du Compte</legend>

              <div class="form-row">
                <label for="user-role">Type de compte :</label>
                <select id="user-role" [(ngModel)]="compteUser.typeCompte" name="user-role" required>
                  <option *ngFor="let account of typeAccounts" [ngValue]="account">
                    {{ account.libelle }}
                  </option>
                </select>
              </div>

              <div class="form-row">
                <label for="denomination">Dénomination :</label>
                <input type="text" id="denomination" [(ngModel)]="compteUser.denomination" name="denomination" required />
              </div>
            </fieldset>
            <fieldset class="nested">
              <legend>Informations Utilisateur</legend>

              <div class="form-row double">
                <div>
                  <label for="nom">Nom :</label>
                  <input type="text" id="nom" [(ngModel)]="compteUser.nom" name="nom" required />
                </div>
                <div>
                  <label for="prenom">Prénom :</label>
                  <input type="text" id="prenom" [(ngModel)]="compteUser.prenom" name="prenom" required />
                </div>
              </div>

              <div class="form-row">
                <label for="login">Email :</label>
                <input type="email" id="login" [(ngModel)]="compteUser.login" name="login" required />
              </div>
            </fieldset>
            <!-- Bouton de Mise à Jour -->
            <div class="form-group submit-btn form-left">
              <button type="submit" [disabled]="!fUpdate.valid" class="btn-login"> Enregistrer </button>
            </div>
            <!-- Bouton  Annuler -->
            <div class="form-group cancel-btn form-right">
              <button type="button" class="btn-cancel" (click)="onCancel()">Annuler</button>
            </div>
            
          </div>

          <!-- Section Droite -->
          <div class="form-right">
            <fieldset class="nested">
              <legend>Adresse</legend>

              <div class="form-row">
                <label for="streetName">Rue :</label>
                <input type="text" id="streetName" [(ngModel)]="adresseS.streetName" name="streetName" required />
              </div>

              <div class="form-row">
                <label for="streetNumber">Numéro :</label>
                <input type="number" id="streetNumber" [(ngModel)]="adresseS.streetNumber" name="streetNumber" required />
              </div>

              <div class="form-row">
                <label for="label">Code Postal :</label>
                <input type="text" id="label" [(ngModel)]="adresseS.label" name="label" required />
              </div>

              <div class="form-row">
                <label for="city">Ville :</label>
                <input type="text" id="city" [(ngModel)]="adresseS.city" name="city" required />
              </div>

              <div class="form-row">
                <label for="country">Pays :</label>
                <select id="country" [(ngModel)]="adresseS.country" name="country" required>
                  <option *ngFor="let pay of pays" [ngValue]="pay">{{ pay.name }}</option>
                </select>
              </div>
            </fieldset>
            
            <fieldset class="nested">
              <legend>Logo du compte</legend>
              <div class="form-row logo-row">
                <input type="file" id="fileInput" (change)="onFileSelected($event)" accept="image/*" hidden>
                <button type="button" class="btn-upload" (click)="clickFileSelector()">Choisir une image</button>

                <div class="preview-container" *ngIf="previewUrl">
                  <img [src]="previewUrl" alt="Aperçu du logo" class="preview-image">
                </div>
              </div>
            </fieldset>
          </div>

        </div>

      </form>
    </div>
  </div>
</div>

<p-toast position="top-center" key="tc"></p-toast>
